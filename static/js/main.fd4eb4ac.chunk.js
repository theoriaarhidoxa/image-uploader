(this.webpackJsonpfcc2=this.webpackJsonpfcc2||[]).push([[0],{33:function(e,t,a){},34:function(e,t,a){},38:function(e,t,a){},42:function(e,t,a){"use strict";a.r(t);var n=a(0),c=a.n(n),r=a(20),s=a.n(r),i=(a(33),a(34),a(15)),o=a(2),l=a(14),p=a(11),j=a.n(p),d=a(17),u=a(6),b="static/media/cloud-icon_on.28fb157d.svg",f=a(8),O=(a(26),a(1));f.a.apps.length?f.a.app():f.a.initializeApp({apiKey:"AIzaSyABsZayhyap7VemkqfhinX4gdRgXUEV-tw",authDomain:"imageuploader2-b3cb3.firebaseapp.com",projectId:"imageuploader2-b3cb3",storageBucket:"imageuploader2-b3cb3.appspot.com",messagingSenderId:"244612194682",appId:"1:244612194682:web:8572ebd8244e6e7930b6c3"});var m=f.a.storage(),x=function(){var e=Object(n.useRef)(),t=Object(n.useState)([]),a=Object(u.a)(t,2),c=a[0],r=a[1],s=Object(n.useState)(!1),o=Object(u.a)(s,2),p=o[0],f=o[1];return Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("input",{type:"file",multiple:!0,ref:e,onChange:function(e){r([]);var t=e.target.files;t=Array.from(t),r(t.map((function(e,t){var a=Object.assign(e,{});return a.id=(new Date).getTime()+t,a.uploadProgress=0,a}))),t.forEach((function(e,t){var a=new FileReader;a.onload=function(){var e=Object(d.a)(j.a.mark((function e(a){var n,c;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a.target.result;case 2:return n=e.sent,e.next=5,a.timeStamp;case 5:c=e.sent,r((function(e){return e.map((function(e,a){if(t===a){var r=Object.assign(e);return r.src=n,r.timeStamp=c,r.order=t+1,r}return e}))}));case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),a.readAsDataURL(e)}))},accept:"image/*"}),0===c.length&&Object(O.jsxs)("h2",{children:[Object(O.jsx)("img",{src:b,alt:""}),"\u041d\u0430\u0447\u043d\u0438\u0442\u0435 \u0434\u043e\u0431\u0430\u0432\u043b\u044f\u0442\u044c \u0438\u0437\u043e\u0431\u0440\u0430\u0436\u0435\u043d\u0438\u044f..."]}),Object(O.jsxs)("div",{className:"wrapper__buttons",children:[Object(O.jsx)("input",{type:"button",disabled:p,className:"btn",value:c.length?"\u041f\u043e\u0432\u0442\u043e\u0440\u0438\u0442\u044c":"\u041d\u0430\u0447\u0430\u0442\u044c",onClick:function(){e.current.click()}}),c.length>0&&Object(O.jsx)("input",{type:"button",disabled:p,onClick:function(){f(!0),c.forEach((function(e){var t=m.ref("/upload/".concat(e.name)).put(e),a=c.length;t.on("state_changed",(function(e){var t=e.bytesTransferred/e.totalBytes*100,n=c.find((function(t){return t.size===e.totalBytes}));n.uploadProgress=parseInt(t),r([].concat(Object(l.a)(c),[n]).slice(0,a))}),(function(e){}),(function(){}))}))},className:"btn red",value:"\u0417\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u044c"}),p&&Object(O.jsx)("input",{type:"button",className:"btn",value:"\u041d\u0430\u0447\u0430\u0442\u044c \u0437\u0430\u043d\u043e\u0432\u043e",onClick:function(){r([]),f(!1)}})]}),Object(O.jsx)("div",{className:"wrapper__previews",children:c.sort((function(e,t){return e.order-t.order})).map((function(e){return Object(O.jsxs)("div",{className:"wrapper__previews-item",children:[Object(O.jsx)("img",{src:e.src,alt:""}),!p&&Object(O.jsx)("i",{onClick:function(){return t=e.id,void r(c.filter((function(e){return e.id!==t})));var t}}),Object(O.jsxs)("p",{className:p?"panel hiddenPanel":"panel",children:[Object(O.jsx)("span",{children:e.name}),Object(O.jsx)("span",{children:"".concat((e.size/1e3).toFixed(1)," Kb")})]}),p&&Object(O.jsxs)("p",{className:"panel bluePanel",children:[Object(O.jsxs)("span",{style:100===e.uploadProgress?{color:"#fff"}:null,children:[e.uploadProgress,"%"]}),Object(O.jsx)("em",{style:{width:e.uploadProgress+"%"}})]})]},e.id)}))}),p&&Object(O.jsx)("span",{className:"fixedBottomRight",children:Object(O.jsx)(i.b,{to:"/list",children:"\u0421\u043f\u0438\u0441\u043e\u043a \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0445 \u0444\u0430\u0439\u043b\u043e\u0432"})})]})},h=(a(38),function(){return Object(O.jsx)("div",{className:"loaderWrap",children:Object(O.jsx)("div",{className:"loadingio-spinner-blocks-mty7grqp7kl",children:Object(O.jsxs)("div",{className:"ldio-qw2vmiyfhg",children:[Object(O.jsx)("div",{style:{left:"38px",top:"38px",animationDelay:"0s"}}),Object(O.jsx)("div",{style:{left:"80px",top:"38px",animationDelay:"0.125s"}}),Object(O.jsx)("div",{style:{left:"122px",top:"38px",animationDelay:"0.25s"}}),Object(O.jsx)("div",{style:{left:"38px",top:"80px",animationDelay:"0.875s"}}),Object(O.jsx)("div",{style:{left:"122px",top:"80px",animationDelay:"0.375s"}}),Object(O.jsx)("div",{style:{left:"38px",top:"122px",animationDelay:"0.75s"}}),Object(O.jsx)("div",{style:{left:"80px",top:"122px",animationDelay:"0.625s"}}),Object(O.jsx)("div",{style:{left:"122px",top:"122px",animationDelay:"0.5s"}})]})})})}),g=a(18);f.a.apps.length?f.a.app():f.a.initializeApp({apiKey:"AIzaSyABsZayhyap7VemkqfhinX4gdRgXUEV-tw",authDomain:"imageuploader2-b3cb3.firebaseapp.com",projectId:"imageuploader2-b3cb3",storageBucket:"imageuploader2-b3cb3.appspot.com",messagingSenderId:"244612194682",appId:"1:244612194682:web:8572ebd8244e6e7930b6c3"});var y=f.a.storage(),v=function(){var e=Object(g.b)(),t=Object(g.c)((function(e){return e.image})),a=t.loading,c=t.images,r=t.emptyList;Object(n.useEffect)((function(){return e(function(){var e=Object(d.a)(j.a.mark((function e(t){var a,n;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a=y.ref(),n=a.child("/upload"),t({type:"SET_EMPTY_LIST",payload:!1}),n.listAll().then((function(e){e.items.forEach((function(e){e.getDownloadURL().then((function(e){t({type:"FETCH_SINGLE_IMAGE",payload:e})})).catch((function(e){}))}))})).catch((function(e){})).finally((function(){t({type:"SET_LOADING",payload:!1})}));case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),function(){e({type:"SET_EMPTY_LIST",payload:!0}),e({type:"SET_LOADING",payload:!0})}}),[]);var s=function(t,a){a.target.disabled=!0,c.length<2&&setTimeout((function(){e({type:"SET_EMPTY_LIST",payload:!0})}),1e3),e(function(e){return function(){var t=Object(d.a)(j.a.mark((function t(a){return j.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:y.refFromURL(e).delete().then((function(){a({type:"REMOVE_SINGLE_IMAGE",payload:e})}));case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()}(t))};return a?Object(O.jsx)(h,{}):Object(O.jsxs)(O.Fragment,{children:[r&&Object(O.jsx)("h2",{style:{padding:"70px 0 30px 0"},children:"\u0412\u0441\u0435 \u0440\u0430\u043d\u0435\u0435 \u0437\u0430\u0433\u0440\u0443\u0436\u0435\u043d\u043d\u044b\u0435 \u0444\u0430\u0439\u043b\u044b \u0443\u0434\u0430\u043b\u0435\u043d\u044b. \u0418\u043d\u044b\u043c \u0441\u043f\u043e\u0441\u043e\u0431\u043e\u043c \u0443\u0432\u0438\u0434\u0435\u0442\u044c \u044d\u0442\u0443 \u043d\u0430\u0434\u043f\u0438\u0441\u044c \u043d\u0435 \u043f\u043e\u043b\u0443\u0447\u0438\u0442\u0441\u044f."}),Object(O.jsx)("div",{className:"wrapper__filesList",children:Object(O.jsx)("table",{children:Object(O.jsx)("tbody",{children:c.map((function(e){return Object(O.jsxs)("tr",{className:"wrapper__filesList-item",children:[Object(O.jsx)("td",{children:Object(O.jsx)("img",{src:e,alt:""})}),Object(O.jsx)("td",{children:Object(O.jsx)("a",{href:e,target:"_blank",rel:"noreferrer",children:e})}),Object(O.jsx)("td",{children:Object(O.jsx)("button",{className:"btn",onClick:function(t){return s(e,t)},children:"\u0423\u0434\u0430\u043b\u0438\u0442\u044c"})})]},e)}))})})}),Object(O.jsx)("span",{className:"fixedBottomRight",children:Object(O.jsx)(i.b,{to:"/",children:"\u0412\u0435\u0440\u043d\u0443\u0442\u044c\u0441\u044f \u043a \u0437\u0430\u0433\u0440\u0443\u0437\u0447\u0438\u043a\u0443"})})]})},_=function(){return Object(O.jsxs)("div",{className:"wrapper",children:[Object(O.jsxs)("p",{children:["\u0412\u043e\u0442 ",Object(O.jsx)("a",{href:"https://www.youtube.com/watch?v=5vx2PVClSVU",target:"_blank",rel:"noreferrer",children:"\u0438\u0441\u0442\u043e\u0447\u043d\u0438\u043a \u0432\u0434\u043e\u0445\u043d\u043e\u0432\u0435\u043d\u0438\u044f"})," \u0434\u043b\u044f \u044d\u0442\u043e\u0433\u043e\xa0\u043f\u0440\u043e\u0435\u043a\u0442\u0430.",Object(O.jsx)("br",{})," \u041a\u0442\u043e-\u0442\u043e \u043f\u0440\u043e\u0441\u0442\u043e \u043e\u0431\u044f\u0437\u0430\u043d \u0435\u0433\u043e \u0440\u0435\u0430\u043b\u0438\u0437\u043e\u0432\u0430\u0442\u044c \u043d\u0430 \u043b\u044e\u0431\u043e\u043c \u0444\u0440\u0435\u0439\u043c\u0432\u043e\u0440\u043a\u0435, \u043e\u0442\u043c\u0435\u0447\u0430\u0435\u0442 \u0430\u0432\u0442\u043e\u0440 \u043a\u0430\u043d\u0430\u043b\u0430 \u0432 \u043a\u043e\u043d\u0446\u0435 \u0440\u043e\u043b\u0438\u043a\u0430.",Object(O.jsx)("br",{}),Object(O.jsx)("br",{})]}),Object(O.jsx)(i.a,{children:Object(O.jsxs)(o.c,{children:[Object(O.jsx)(o.a,{path:"/",exact:!0,element:Object(O.jsx)(x,{})}),Object(O.jsx)(o.a,{path:"/list",element:Object(O.jsx)(v,{})})]})})]})},E=a(19),w=a(28),I=a(9),S={loading:!0,emptyList:!1,images:[]},N=Object(E.b)({image:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:S,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_EMPTY_LIST":return Object(I.a)(Object(I.a)({},e),{},{emptyList:t.payload,images:[]});case"SET_LOADING":return Object(I.a)(Object(I.a)({},e),{},{loading:t.payload});case"FETCH_SINGLE_IMAGE":return Object(I.a)(Object(I.a)({},e),{},{images:[].concat(Object(l.a)(e.images),[t.payload])});case"REMOVE_SINGLE_IMAGE":return Object(I.a)(Object(I.a)({},e),{},{images:e.images.filter((function(e){return e!==t.payload}))});default:return e}}}),T=Object(E.c)(N,Object(E.a)(w.a));s.a.render(Object(O.jsx)(g.a,{store:T,children:Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(_,{})})}),document.getElementById("root"))}},[[42,1,2]]]);
//# sourceMappingURL=main.fd4eb4ac.chunk.js.map